<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Connexion â€” PAF Stream</title>

  <style>
    :root{
      --bg:#000;
      --card:#111;
      --text:#fff;
      --muted:#aaa;
      --accent:#e50914;
    }

    *{margin:0;padding:0;box-sizing:border-box}

    body{
      font-family:Arial,Helvetica,sans-serif;
      background:
        linear-gradient(to top, rgba(0,0,0,.85), rgba(0,0,0,.6)),
        url("genesis.jpg") center/cover no-repeat;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--text);
    }

    .login-box{
      background:var(--card);
      padding:40px;
      width:100%;
      max-width:420px;
      border-radius:10px;
      animation: fadeIn .8s ease;
    }

    h1{
      margin-bottom:20px;
      font-size:1.8rem;
    }

    input{
      width:100%;
      padding:14px;
      margin-bottom:14px;
      border:none;
      border-radius:6px;
      background:#222;
      color:#fff;
      font-size:1rem;
    }

    button{
      width:100%;
      padding:14px;
      background:var(--accent);
      border:none;
      border-radius:6px;
      font-weight:bold;
      color:#fff;
      cursor:pointer;
      font-size:1rem;
    }

    button:hover{opacity:.9}

    .error{
      margin-top:14px;
      color:#ff6b6b;
      font-size:.85rem;
      text-align:center;
    }

    @keyframes fadeIn{
      from{opacity:0;transform:translateY(20px)}
      to{opacity:1;transform:translateY(0)}
    }
  </style>
</head>

<body>

<div class="login-box">
  <h1>Connexion Ã  PAF Stream</h1>

  <input type="email" id="email" placeholder="Adresse e-mail" required>
  <input type="password" id="password" placeholder="Mot de passe" required>

  <button id="loginBtn">Se connecter / S'inscrire</button>

  <div class="error" id="error"></div>
</div>

<!-- ðŸ”¥ FIREBASE AUTH -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import {
    getAuth,
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword
  } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBwABBsB1Sn1LU1CjCQpadHEz6tnebVLVY",
    authDomain: "paf-stream-web.firebaseapp.com",
    projectId: "paf-stream-web",
    storageBucket: "paf-stream-web.firebasestorage.app",
    messagingSenderId: "368490377612",
    appId: "1:368490377612:web:e6ebabae0a0453c0f326a9"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const email = document.getElementById("email");
  const password = document.getElementById("password");
  const errorBox = document.getElementById("error");

  document.getElementById("loginBtn").addEventListener("click", async () => {
    errorBox.textContent = "";

    try {
      // Tentative de connexion
      await signInWithEmailAndPassword(auth, email.value, password.value);
      window.location.href = "mur.html";

    } catch (error) {
      // Si l'utilisateur n'existe pas â†’ crÃ©ation du compte
      if (error.code === "auth/user-not-found") {
        try {
          await createUserWithEmailAndPassword(auth, email.value, password.value);
          window.location.href = "mur.html";
        } catch (e) {
          errorBox.textContent = e.message;
        }
      } else {
        errorBox.textContent = error.message;
      }
    }
  });
</script>

</body>
</html>
